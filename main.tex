\documentclass{naive-article}

\usepackage{simpler-wick}
\usepackage{cancel}
\usepackage{tikz}
\usetikzlibrary{decorations.markings}

\title{QFT: A Beginner's Guide}
\author{Alex Lin}

\begin{document}

\newcommand{\bra}[1]{\left<#1\right|}
\newcommand{\ket}[1]{\left|#1\right>}
\newcommand{\braket}[2]{\left<#1|#2\right>}
\newcommand{\comm}[2]{\left[#1,#2\right]}
\newcommand{\crea}[2]{#1^\dagger_\mathbf{#2}}
\newcommand{\annhil}[2]{#1_\mathbf{#2}}
\newcommand{\nomo}[1]{:#1:}

\begin{abstract}
Among the dazzling world of high-energy physics, quantum field theory is undoubtedly the most fundamental, yet one of the most difficult to learn. Unlike general relativity, which is built upon a few postulations and consistent thought experiments, QFT is a maze, hiding its real physics beneath complicated technical details. Such complexity is a reflection of the struggles of physicists in the early 1900s, who constantly encountered dead ends and eventually pieced together people's understanding of particles into a complete, special-relativity-compliant theory. New QFT learners often find themselves lost in all the unfamiliar concepts, slowly and painfully building up their intuition. The purpose of this note is to go over the important pictures in QFT, to help confused QFT learners as much as I can.
\end{abstract}

\maketitle

\section{Quantum Theory of Fields}
\subsection{Why the Fields?}
It is well known today that all fundamental particles in the world are described by different fields, or more precisely, ``excitation'' of those fields. Such an idea is already quite curious. How on earth could quantum particles, known as ``small packets of energy'', be regarded as fields, which are objects extending throughout the spacetime? It appears more frustrating for those who have learned quantum mechanics, where we already know how to describe a system of quantum particles through wave functions and the Schrödinger equation. It is natural to ask: why bother? The answer is simple: we had to.

Many excellent works tackled that question from different aspects, so I will not go deep into it. I will list some important points.
\begin{itemize}
    \item \textbf{Causality}. The old-fashioned Schrödinger equation failed to incorporate the spacetime structure defined by special relativity. Hence, a new theory is needed to describe physics in the regime where both relativistic and quantum effects are significant.
    \item \textbf{Unconserved Particle Numbers}. The classical quantum mechanics also does not play well with changing particle numbers, which is known to happen in experiments (decaying, colliders, etc.). As we shall see, it is natural to describe those behaviors once a correct interpretation of quantum fields is made.
    \item \textbf{Identicality}. From your quantum mechanics course, you learned that particles of the same type are indistinguishable and further classified into bosons and fermions. That is nicely explained if we convince ourselves that all the same particles are part of the same field.
\end{itemize}

Of course, the reasons for studying the quantum theory of fields go far beyond the listed points. See the first chapter of Weinberg's book \cite{Weinberg:1995mt} for a thorough historical review, and refer to the first few chapters of Coleman's lecture \cite{Coleman:2018mew} for a pedagogical perspective.

Nevertheless, we can grasp the clue of a field description of quantum physics from the old relativistic quantum mechanics. Let's introduce the \textit{Dirac equation}, which is a milestone in the development of QFT.\footnote{We employ the unit system $c=\hbar=1$}

The so-called ``covariant form'' of the Dirac equation reads
\begin{equation*}
    (i\gamma^\mu\partial_\mu-m)\psi=0
\end{equation*}
where $\gamma^\mu$ are the Dirac matrices.

Originally, Dirac interpreted $\psi$ in the equation as a wave function of an electron. However, this equation suspiciously resembles a field equation, rather than a Schrödinger-ich equation. The same thing also happened when pursuing quantum mechanics for relativistic spinless particles, which is kind of an implication of covariance. Today, we know that the quantized Dirac equation is indeed the correct description of spin-$\frac{1}{2}$ particles\footnote{This ``quantization of wave function'' caused physicists before the establishment of QFT to think about ``second quantization'', which is inaccurate from the modern perspective and few are using it now}. As we move on, we will see how one recovers this equation of the ``wave function'' from the field theory approach. Another important implication of the Dirac equation is the existence of antiparticles, which historically first appeared as the \textit{hole theory} and the \textit{Dirac sea}. We will come back to them later.

\subsection{How the Fields?} Hopefully, you are convinced of the necessity of describing particles in terms of fields. However, it is still unknown how to understand a field as particles. We can receive some intuition by working on the simplest field\footnote{The sign convention is $(+---)$}.
\begin{equation*}
    (\square^2+m^2)\phi=0
\end{equation*}

This is the famous Klein-Gordon equation. If I tell you that this equation will describe some particles, what property would that particle enjoy? You may first try solving it through a Fourier transformation
\begin{equation*}
    \phi(\mathbf{x},t)=\int d^3\mathbf{p}\,\Phi(\mathbf{p},t)e^{-i\mathbf{p}\cdot x}
\end{equation*}
which reduces the equation to
\begin{equation*}
    \partial_t^2\Phi(\mathbf{p},t)+(\mathbf{p}^2+m^2)\Phi(\mathbf{p},t)=0
\end{equation*}

This shows that the solutions of the Klein-Gordon equation are a superposition of a family of harmonic oscillators labeled by $\mathbf{p}$. Indeed, this is why we call the field that satisfies the Klein-Gordon equation a ``free field''. It is a jargon that means that the frequency modes of the field are decoupled, which is later recognized as the described particles are free of interaction. Things will be even clearer when we further inspect its decoupled frequency modes
\begin{equation*}
    \phi(x^\mu)=\int d^4p\,\Phi(p^\mu)e^{ip\cdot x}
\end{equation*}
That reduces the equation to an algebraic one
\begin{equation*}
    p^\mu p_\mu=m^2
\end{equation*}

This equation, in its core, is the dispersion relation of the equation. But it also takes the form of the energy-momentum relation of an on-shell relativistic particle with mass $m$. The identification of the component of $p^\mu$ is also natural: $p^0$ is the Fourier conjugate of $t$, and $p^i$ are the Fourier conjugate of $\mathbf{x}$. Those are directly related to the energy and momentum in the quantum sense. This hints to us that we are on the right track, so let us push on.

Following the general idea of quantum mechanics, we should now quantize this theory by leveraging the $c$-number field $\phi(x^\mu)$ to a Hermitian operator $\hat{\phi}(x^\mu)$. More precisely, what we are working with is a family of Hermitian operators $\hat{\phi}$ labeled by spacetime coordinates $x^\mu$. A measurement at some point $x^\mu$ will collapse the state into one with a definite eigenvalue of $\hat{\phi}(x^\mu)$, as usual. The hat on the operator is dropped unless there are ambiguities.

We can think about the consequences of the quantization. We know that classically, the Klein-Gordon equation describes a family of harmonic oscillators. When we quantize an uncoupled set of harmonic oscillators, we know every degree of freedom, best known as normal modes, is provided with a ground state $\ket{0}_i$ with nonzero energy $\frac12\omega_i$. Energy is added to the system as quanta and must be a multiple of $\omega_i$. The Klein-Gordon equation is not an exception, but the integer index $i$ is replaced by the continuous $\mathbf{p}$. The Hilbert space of the field configuration is a monstrous tensor product of all the Hilbert spaces of individual modes. We then guess, naturally, that the Hamiltonian of the quantized Klein-Gordon field should look like
\begin{equation*}
    \mathbf{H}=\int d^3\mathbf{p}\,\omega_\mathbf{p} a^\dagger_\mathbf{p}a_\mathbf{p}=\int d^3\mathbf{p}\,\sqrt{\mathbf{p}^2+m^2} a^\dagger_\mathbf{p}a_\mathbf{p}
\end{equation*}
where we introduced the creation-annihilation operator $a^\dagger_\mathbf{p}$ and $a_\mathbf{p}$ for each modes. The ground-state energy is discarded because it will be infinitely large after integration, and we only care about the difference in energy anyway. The Hamiltonian counts how many times each mode is excited by $N_\mathbf{p}=a^\dagger_\mathbf{p}a_\mathbf{p}$ and adds them.

We will later concretely derive this Hamiltonian, and it is right. Now we shall focus on its interpretation. The quantization of the Klein-Gordon field forces us to add energy to the system in quanta, to modes labeled $\mathbf{p}$, which insert an energy of $\sqrt{\mathbf{p}^2+m^2}$ into the system. Naturally, we can think of them as states with a different number of particles, and those particles have definite momentum $\mathbf{p}$, providing an energy of $\sqrt{\mathbf{p}^2+m^2}$. The system is free in the sense that the excited modes do not interact with each other; they just stay in place. Physically, one imagines a group of particles with definite momenta flying straight in space and doing nothing else. Later, when we add interactions to the system, the harmony is destroyed, and $\mathbf{p}$ is no longer a good quantum number.

We can try to recover the familiar wave function description. What we can now create in the vacuum, with precisely one creation operator, is a state of definite momentum. One can build the one-particle wave packet by a superposition of such states.

One last question before we move on. What does the field operator $\phi$ mean in this context? This is more subtle than you would have expected. The quantization provided a discretized excitation of the field, but they are represented in terms of the normal modes. Thinking from the wave packet aspect, which is closer to our classical intuition, the amplitude of the field roughly represents the number of particles (i.e., how strongly the field is excited), and the speed of the wave packet represents the momentum.

\section{Free Quantum Scalar Field}
\subsection{Klein-Gordon Revisited}
We explored around and guessed (or forced you to believe) some results about the quantized Klein-Gordon field. In this subsection, let's put those conclusions on a more solid basis. Our starting point is the Lagrangian density
\begin{equation*}
    \mathcal{S}=\int dt L=\int d^4x\,\mathcal{L}=\int d^4x\,\frac12\left(\partial^\mu\phi\partial_\mu\phi-m^2\phi^2\right)
\end{equation*}

We want to apply the canonical quantization process, so let's derive the Hamiltonian.
\begin{equation*}
    \pi=\frac{\partial\mathcal{L}}{\partial\dot\phi}=\dot\phi
\end{equation*}
\begin{equation*}
    \mathbf{H}=\int d^3\mathbf{x}\,\mathcal{H}=\int d^3\mathbf{x}\,\left(\pi\dot\phi-\mathcal{L}\right)=\frac12\int d^3\mathbf{x}\,\left(\pi^2+(\nabla\phi)^2+m^2\phi^2\right)
\end{equation*}

Now we impose the equal-time canonical commutation relation
\begin{equation*}
\begin{cases}    
    \comm{\phi(\mathbf{x})}{\pi(\mathbf{y})}=i\delta^{(3)}(\mathbf{x}-\mathbf{y})\\
    \comm{\phi(\mathbf{x})}{\phi(\mathbf{y})}=0\\
    \comm{\pi(\mathbf{x})}{\pi(\mathbf{y})}=0
\end{cases}
\end{equation*}

This should finish the quantization. However, we expect everything to look nicer with creation-annihilation operators, so we proceed.
\begin{equation*}
\begin{cases}
    \phi(\mathbf{x})=\int\frac{d^3\mathbf{p}}{(2\pi)^3\sqrt{2E_\mathbf{p}}}\left(a_\mathbf{p}e^{i\mathbf{p}\cdot\mathbf{x}}+a^\dagger_\mathbf{p}e^{-i\mathbf{p}\cdot\mathbf{x}}\right)\\
    \pi(\mathbf{x})=i\int \frac{d^3\mathbf{p}}{(2\pi)^3}\sqrt{\frac{E_\mathbf{p}}{2}}\left(-a_\mathbf{p}e^{i\mathbf{p}\cdot\mathbf{x}}+a^\dagger_\mathbf{p}e^{-i\mathbf{p}\cdot\mathbf{x}}\right)
\end{cases}\implies
\begin{cases}
    a_\mathbf{p}=\frac12\int d^3\mathbf{x}\,e^{-i\mathbf{p}\cdot\mathbf{x}}\left(\sqrt{2E_\mathbf{p}}\phi(\mathbf{x})+i\sqrt{\frac{2}{E_\mathbf{p}}}\pi(\mathbf{x})\right)\\
    a^\dagger_\mathbf{p}=\frac12\int d^3\mathbf{x}\,e^{i\mathbf{p}\cdot\mathbf{x}}\left(\sqrt{2E_\mathbf{p}}\phi(\mathbf{x})-i\sqrt{\frac{2}{E_\mathbf{p}}}\pi(\mathbf{x})\right)
\end{cases}
\end{equation*}
$\frac{d^3\mathbf{p}}{\sqrt{2E_\mathbf{p}}}$ is related to the orthochronous Lorentz invariant measure $d^4p\,\delta(p^2-m^2)\theta(p^0)=\frac{d^3\mathbf p}{2E_\mathbf p}$

Using the inverted equation on the right side, we can work out the commutation relation for the creation-annihilation operators.
\begin{align*}
    \comm{\annhil{a}{p}}{\crea{a}{p^\prime}}&=\frac12\int d^3\mathbf{x}\,d^3\mathbf{y}\,e^{-i\mathbf{p}\cdot\mathbf{x}+i\mathbf{p^\prime}\cdot\mathbf{y}}\\
    &\hspace{-0.5cm}\left(\sqrt{E_\mathbf{p}E_\mathbf{p^\prime}}\comm{\phi(\mathbf{x})}{\phi(\mathbf{y})}+i\sqrt{\frac{E_\mathbf{p^\prime}}{E_\mathbf{p}}}\comm{\pi(\mathbf{x})}{\phi(\mathbf{y})}-i\sqrt{\frac{E_\mathbf{p}}{E_\mathbf{p^\prime}}}\comm{\phi(\mathbf{x})}{\pi(\mathbf{y})}+\frac{1}{\sqrt{E_\mathbf{p}E_\mathbf{p^\prime}}}\comm{\pi(\mathbf{x})}{\pi(\mathbf{y})}\right)\\
    &=\frac12\int d^3\mathbf{x}\,d^3\mathbf{y}\,e^{-i\mathbf{p}\cdot\mathbf{x}+i\mathbf{p^\prime}\cdot\mathbf{y}}\left(\sqrt{\frac{E_\mathbf{p^\prime}}{E_\mathbf{p}}}\delta^{(3)}(\mathbf{y}-\mathbf{x})+\sqrt{\frac{E_\mathbf{p}}{E_\mathbf{p^\prime}}}\delta^{(3)}(\mathbf{x}-\mathbf{y})\right)\\
    &=\frac12\int d^3\mathbf{x}\,e^{-i\mathbf{x}\cdot(\mathbf{p}-\mathbf{p^\prime})}\left(\sqrt{\frac{E_\mathbf{p^\prime}}{E_\mathbf{p}}}+\sqrt{\frac{E_\mathbf{p}}{E_\mathbf{p^\prime}}}\right)\\
    &=(2\pi)^3\delta^{(3)}(\mathbf{p}-\mathbf{p^\prime})
\end{align*}
The other two pairs are trivial.

The result is quite expected. However, you may be curious about the mode expansion of the field operator, which involves both creation and annihilation operators. This is, of course, natural from the point of view of the hermicity of the field operator. But the role of the annihilation operator is indeed mysterious for now, and things get clearer once we proceed to complex scalars and think carefully about antiparticles.

With those expansions in hand, we can now express the Hamiltonian in terms of the creation-annihilation operators (Do it yourself!).
\begin{equation*}
    \mathbf{H}=\int \frac{d^3\mathbf{p}}{(2\pi)^3}\,E_\mathbf{p}\crea{a}{p}\annhil{a}{p}+\frac12\delta^{(3)}(\mathbf{0})
\end{equation*}

However, there is a curious term proportional to $\delta^{(3)}(\mathbf{0})$, which corresponds to the energy of the ground state of the degrees of freedom and, therefore, is proportional to the volume of the system. It is infinite due to the infinite-resolution graining of the field, but we can freely throw it away. It will not contribute to the actual energy difference that we measure. Nevertheless, it provides us with a good chance to introduce the \textit{normal ordering}.
\subsubsection{Normal Ordering}
When quantizing a classical system through canonical quantization, there is an inherent ambiguity. The core of this ambiguity is that the $q$-numbers no longer commute as their $c$-number correspondents do. Similar ambiguity happens in QFT as well. In particular, when you rewrite a classical operator in terms of the creation-annihilation operators, there are many equal possibilities related by the commutation relation of the creation-annihilation operators. The problem is, such processes always produce $\delta$-functions, which lead to infinities. We would like to have an ordering of the creation-annihilation operators so that we are free of infinities. And, since we will be working intensively with the creation-annihilation operators and the vacuum state $\ket{0}$, the natural choice is to put the annihilation operators to the right, so they will touch the vacuum state. Upon imposing that, any operators that contain the annihilation operator will eliminate the vacuum state, which is also what one would do when calculating with the creation-annihilation operators.

Since such operations are very handy and we need them so often, we shall develop a notation
\begin{equation*}
    \nomo{\crea{a}{p^\prime}\annhil{a}{p^{\prime\prime}}\crea{a}{p}}=\nomo{\annhil{a}{p^{\prime\prime}}\crea{a}{p^\prime}\crea{a}{p}}=\cdots=\crea{a}{p^\prime}\crea{a}{p}\annhil{a}{p^{\prime\prime}}
\end{equation*}

An operator surrounded by colons $\nomo{\mathcal{O}}$ is normal-ordered, meaning that we ignore whatever order we write the creation-annihilation operators in between them; the operator is thought of as if all the annihilation operators are to the right of the creation operators.

Nobody knows why this just works in practice, but since it allows us to give all the experimentally verified results, we accept it.

\subsubsection{Multiparticle State and Identicality}
We argue in the Introduction that quantizing the field naturally gives indistinguishable particles. Let's quickly check this fact for the quantized Klein-Gordon field.

By our interpretation of the quantized field, a multi-particle state is generated by
\begin{equation*}
    \ket{\mathbf{p}_1,\mathbf{p}_2,\cdots,\mathbf{p}_n}\propto \crea{a}{\mathbf{p}_1}\crea{a}{\mathbf{p}_2}\cdots\crea{a}{\mathbf{p}_n}\ket{0}
\end{equation*}

Note that the creation operators are always commuting, so the sequence of how they act on the vacuum state doesn't matter. This clearly indicates that we are creating a bosonic state. In other word, the quantized Klein-Gordon field describes some type of bosonic particle.

Actually, the result goes a bit further. When we later systematically investigate the type of fields allowed in QFT, we will find that fields are essentially classified by mass and their spins. And there is a beautiful Spin-Statistics Theorem by Dirac, telling us that all particles with integer spins are bosonic, while all those with half-integer spins are fermionic. However, a detailed discussion of the topic is a bit too early for us.
\subsection{Non-Equal Time and Propagators}
So far, we have quantized the Klein-Gordon field and obtained a nice-looking framework to work with it. Of course, from now on, we can compute whatever we want for the theory. One of the most important quantities in QFT is the $n$-point correlation functions, which are the vacuum expectation values of $n$ products of $\phi$ at different points. Why we call it correlation functions is mysterious for now, and will be clear when we introduce Feynman's path integral later. But before we proceed to the correlators, let us compute the field operators at an arbitrary time. Be careful! Upon canonical quantization, all relations and operators have an equal reference time $t_0$.

With that being said, we push the operator to an arbitrary time $t$ using the time translation operator $e^{-i\mathbf{H}(t-t_0)}$
\begin{equation}
    \label{four-kg-operator}
    \phi(x)\equiv\phi(t,\mathbf{x})=e^{i\mathbf{H}(t-t_0)}\phi(t_0,\mathbf{x})e^{-i\mathbf{H}(t-t_0)}=\int\frac{d^3\mathbf{p}}{(2\pi)^3\sqrt{2E_\mathbf{p}}}\left(a_\mathbf{p}e^{-ip\cdot x}+a^\dagger_\mathbf{p}e^{ip\cdot x}\right)
\end{equation}
Where $p^0$ in the four-momentum is identified with $E_\mathbf{p}$.

Let me explain how we get this. The core is to calculate $e^{i\mathbf{H}(t-t_0)}\crea{a}{p}e^{-i\mathbf{H}(t-t_0)}$
\begin{equation*}
    \comm{\mathbf{H}}{\crea ap}=\int \frac{d^3\mathbf{p^\prime}}{(2\pi)^3}E_\mathbf{p^\prime}\comm{\crea a{p^\prime}\annhil a{p^\prime}}{\crea ap}=\int \frac{d^3\mathbf{p^\prime}}{(2\pi)^3}E_\mathbf{p^\prime}\crea a{p^\prime}\comm{\annhil a{p^\prime}}{\crea ap}=E_\mathbf{p}\crea ap
\end{equation*}
\begin{equation*}
\begin{split}
    \comm{\mathbf{H}^n}{\crea ap}&=\comm{\mathbf{H}}{\crea ap}\mathbf{H}^{n-1}+\mathbf{H}\comm{\mathbf{H}^{n-1}}{\crea ap}\\
    &=E_\mathbf{p}\crea ap\mathbf{H}^{n-1}+\mathbf{H}\comm{\mathbf{H}^{n-1}}{\crea ap}\\
    &=E_\mathbf{p}\crea ap\mathbf{H}^{n-1}+\mathbf{H}\left[\crea ap(\mathbf{H}+E_\mathbf{p})^{n-1}-\crea ap\mathbf H^{n-1}\right]\\
    &=E_\mathbf{p}\crea ap\mathbf{H}^{n-1}+\mathbf{H}\crea ap(\mathbf{H}+E_\mathbf{p})^{n-1}-\mathbf{H}\crea ap\mathbf H^{n-1}\\
    &=E_\mathbf{p}\crea ap\mathbf{H}^{n-1}+\mathbf{H}\crea ap(\mathbf{H}+E_\mathbf{p})^{n-1}-\crea ap\mathbf H^n-E_\mathbf{p}\crea ap\mathbf{H}^{n-1}\\
    &=\mathbf{H}\crea ap(\mathbf{H}+E_\mathbf{p})^{n-1}-\crea ap\mathbf{H}^{n-1}\\
    &=\crea ap\mathbf{H}(\mathbf{H}+E_\mathbf{p})^{n-1}+\crea apE_\mathbf{p}(\mathbf{H}+E_\mathbf{p})^{n-1}-\crea ap\mathbf{H}^{n-1}\\
    &=\crea ap(\mathbf{H}+E_\mathbf{p})^n-\crea ap\mathbf{H}^n
\end{split}
\end{equation*}
In those lines we used $\comm{\crea ap}{\mathbf{H}^{n-1}}=\crea ap(\mathbf{H}+E_\mathbf{p})^{n-1}-\crea ap\mathbf{H}^{n-1}$ so as to inductively prove this identity for arbitrary $n$. Note that the essence of this commutation relation is to tell that $\mathbf{H}^n\crea ap=\crea ap(\mathbf{H}+E_\mathbf p)^n$. Then, $e^{i\mathbf{H}(t-t_0)}\crea{a}{p}e^{-i\mathbf{H}(t-t_0)}=\crea ape^{i(\mathbf{H}+E_\mathbf p)(t-t_0)}e^{-i\mathbf{H}(t-t_0)}=\crea ape^{iE_\mathbf p(t-t_0)}$. Similarly for $\annhil ap$, we have $\mathbf{H}^n\annhil ap=\annhil ap(\mathbf{H}-E_\mathbf p)^n$. It is trivial to obtain \eqref{four-kg-operator} with these identities in hand.

Good, now we have the field operator for any time and at any point. Why don't we check their commutator, so we can verify the claimed fact that QFT is causal? Let's do it.
\begin{equation}
    \label{kg-commutator}
    \begin{split}
    \comm{\phi(x)}{\phi(y)}&=\frac{1}{(2\pi)^6}\comm{\int\frac{d^3\mathbf{p}}{\sqrt{2E_\mathbf{p}}}\left(a_\mathbf{p}e^{-ip\cdot x}+a^\dagger_\mathbf{p}e^{ip\cdot x}\right)}{\int\frac{d^3\mathbf{p^\prime}}{\sqrt{2E_\mathbf{p^\prime}}}\left(a_\mathbf{p^\prime}e^{-ip^\prime\cdot y}+a^\dagger_\mathbf{p^\prime}e^{ip^\prime\cdot y}\right)}\\
    &=\frac1{(2\pi)^6}\iint\frac{d^3\mathbf{p}}{\sqrt{2E_\mathbf{p}}}\frac{d^3\mathbf{p^\prime}}{\sqrt{2E_\mathbf{p^\prime}}}\left\{e^{-ip\cdot x+ip^\prime\cdot y}\comm{\annhil ap}{\crea{a}{p^\prime}}+e^{ip\cdot x-ip^\prime\cdot y}\comm{\crea a p}{\annhil a{p^\prime}}\right\}\\
    &=\int\frac{d^3\mathbf{p}}{(2\pi)^32E_\mathbf{p}}\left[e^{-ip\cdot(x-y)}-e^{-ip\cdot(y-x)}\right]\\
    &=\int \frac{d^4p}{(2\pi)^3}\,\delta(p^2-m^2)\theta(p^0)\left[e^{-ip\cdot(x-y)}-e^{-ip\cdot(y-x)}\right]
    \end{split}
\end{equation}

We converted back to the manifestly Lorentz invariant on-shell measure for convenience. The point is to realize that we are integrating over the orbit of the proper, orthochronous Lorentz subgroup acting on a timelike(or lightlike, but we shall assume $m>0$ for simplicity) vector $p$. Schematically, this is represented as $\sum_\Lambda f(\left<\Lambda p, x-y\right>)$, where $p$ is some representative of the orbit, say $p=(m,0,0,0)$. Since $\Lambda$ are elements of the isometry group, $\sum_\Lambda f(\left<\Lambda p, x-y\right>)=\sum_\Lambda f(\left<p, \Lambda^{-1}(x-y)\right>)=\sum_\Lambda f(\left<p,\Lambda(x-y)\right>)$.

This argument hints at how this commutator simplifies when $x-y$ is spacelike. When that is the case, there always exists an element $\Lambda$ in the proper, orthochronous Lorentz subgroup so that $y-x=\Lambda(x-y)$. Therefore, the subtraction in \eqref{kg-commutator} will cancel out pairwise, and thus the commutator is $0$. When $x-y$ is timelike, such an element fails to exist, and the commutator is generally non-zero. When $x-y$ is light-like, the result depends on whether $m>0$, and additional discussion is needed.\footnote{Please refer to Appendix \ref{appendix:structure-of-lorentz-group} if you find the Lorentz group particularly unfamiliar to you}

The calculation guaranteed us that the basic causality is preserved in QFT: when conducting measurements on spacelike-separated points $x$ and $y$, the measurements will never interfere with each other (i.e., can be measured ``simultaneously").

As we notice, the commutator of the field operator is a $c$-number. In fact, we will discuss this quantity a lot in the following sections, which is worth further discussion. To begin with, we rewrite \eqref{kg-commutator} in another form.

\begin{equation*}
    \begin{split}
    \comm{\phi(x)}{\phi(y)}&=\int\frac{d^3\mathbf{p}}{(2\pi)^32E_\mathbf{p}}\left[e^{-ip\cdot(x-y)}-e^{-ip\cdot(y-x)}\right]\\
    &=D(x-y)-D(y-x)\\
    &\sim\int \frac{d^4p}{(2\pi)^4}\frac{ie^{-ip\cdot(x-y)}}{p^2-m^2}
    \end{split}
\end{equation*}

In the above, we defined the function $D(x-y)=\int \frac{d^3\mathbf p}{(2\pi)^3 2E_\mathbf p}e^{-ip\cdot(x-y)}$, and we wrote a four-integral following $\sim$, because $D(x-y)$ and $-D(y-x)$ are essentially the residues of the integrand with respect to $p^0$.

The integral does not come from nowhere, and it is crucial to understand its spirit to convince yourself of the name ``propagator". The commutator of the field operator kind of measures how the measurement at $x$ affects the measurement at $y$. Physically, when such a measurement takes place, the ``field value" at $x$ is suddenly fixed to a classical value $\phi(x)$. The consequence of the altered field state has to somehow propagate to $y$ at a finite speed due to our relativistic settings. In this way, although far from being rigorous, we are encouraged to think about how the Klein-Gordon field reacts to a disturbance. Classically, such a response is encoded in the sourced Klein-Gordon equation
\begin{equation*}
    (\square^2+m^2)\phi=\rho(x)
\end{equation*}
But the linearity of the Klein-Gordon equation guarantees that it suffices to work with the $\delta$-response or the kernel of the Klein-Gordon equation, which is
\begin{equation*}
    (\square^2+m^2)G(x-y)=-i\delta^{(4)}(x-y)
\end{equation*}
The solutions, subject to different boundary conditions, are called the \textbf{Green function}. And, as we shall soon find out, the propagators are just synonyms of the Green functions.

But before we can say anything, it is important to solve it first. We work with the general methodology, which we first assume is a Fourier expanded ansatz, only depending on $x-y$ due to the translational invariance and isotropicity of the equation.
\begin{equation*}
    G(x-y)=\int\frac{d^4 p}{(2\pi)^4}\tilde{G}(p)e^{-ip\cdot(x-y)}
\end{equation*}

With the ansatz, the equation reduces to
\begin{equation*}
    \int\frac{d^4 p}{(2\pi)^4}\tilde{G}(p)(-p^2+m^2)e^{-ip\cdot(x-y)}=-i\delta^{(4)}(x-y)
\end{equation*}

Finally, the equation is solved by
\begin{equation*}
    \tilde{G}(p)=\frac{i}{p^2-m^2}
\end{equation*}

Looks familiar? That's right, it exactly reproduces the four-integral appearing in the commutator. Our instincts are working, and the commutator is indeed somehow related to the response to a point disturbance, although we are using an unusual convention of a factor of $-i$. The appearance of $-i$, the names ``propagator", ``correlator" and ``Green functions" will have more natural explains when we later introduce Feynman's path integral, rather than these mumbo-jumbos.

However, we are still left with one question: what is the boundary condition? Indeed, the Green function we worked out seemingly solves the equation, but we know that such a PDE is only completely solved when a proper boundary condition is specified, and there are seemingly no free parameters left for us to choose. So how do we specify the boundary condition? The answer hides in the analytic structure of the propagator.

Think carefully about the integral $\int \frac{d^4p}{(2\pi)^4}\frac{ie^{-ip\cdot(x-y)}}{p^2-m^2}$. Conventionally, the $p^0$ integral is carried out in the interval $(-\infty,+\infty)$, which seems a natural choice because $p^0$ is commonly understood as energy. But notice here that $p^0$ is not required to be on-shell, and it can even be negative (the integral is sharply peaked at the on-shell $p^0$, though). In this sense, there is no reason to require $p^0$ to be real at all. And also, when integrating over $(-\infty,+\infty)$, the path directly passes the two poles of the integrand. However, in our context, we are not obliged to consider the principal value of this integral. Instead, we can evaluate this integral along whatever path extending $(-\infty,+\infty)$, and the result still solves the equation. Since the integrand is meromorphic with two simple poles at $p^0=\pm E_\mathbf{p}$, the results of such integrals are the same if we can continuously morph between the paths without passing the poles (i.e., the paths are homotopic). Then, all possible results of this integral is classified by how the paths twist around each of the two poles.

This means that all the paths belonging to the same homotopy class describe the Green function subject to the same boundary condition, and different pole prescriptions provide different boundary conditions. Although it is hard to say whether this accounts for all possible boundary conditions, this covers all cases that we would use.

For example, if we choose a path that picks up the two poles from above (see Fig. \ref{fig:retarded-propagator}), or equivalently, a path slightly shifted to the positive imaginary axis, the resulting Green function is called the \textbf{retarded propagator}. The retarded propagator get its name because it is $0$ when $x^0<y^0$, so it is the causal response to a point disturbance. Similarly, if one chooses to pick the two poles from below (Fig. \ref{fig:advanced-propagator}), it is $0$ when $x^0>y^0$ and it is the \textbf{advanced propagator}.

\begin{figure}[!htb]
    \centering
    \begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,300); %set diagram left start at 0, and has height of 300

%Shape: Axis 2D [id:dp19021134988303667] 
\draw  (117.2,171.99) -- (541.44,171.99)(328.64,37.6) -- (328.64,254.64) (534.44,166.99) -- (541.44,171.99) -- (534.44,176.99) (323.64,44.6) -- (328.64,37.6) -- (333.64,44.6)  ;
%Shape: Free Drawing [id:dp7182675262791272] 
\draw  [line width=3] [line join = round][line cap = round] (210.2,171.9) .. controls (210.2,171.9) and (210.2,171.9) .. (210.2,171.9) ;
%Shape: Free Drawing [id:dp5698132248798358] 
\draw  [line width=3] [line join = round][line cap = round] (450.2,171.4) .. controls (450.2,171.4) and (450.2,171.4) .. (450.2,171.4) ;
%Shape: Arc [id:dp42528895990298676] 
\draw  [draw opacity=0] (180.5,172.5) .. controls (180.5,172.5) and (180.5,172.5) .. (180.5,172.5) .. controls (180.5,172.5) and (180.5,172.5) .. (180.5,172.5) .. controls (180.5,155.93) and (193.93,142.5) .. (210.5,142.5) .. controls (227.07,142.5) and (240.5,155.93) .. (240.5,172.5) -- (210.5,172.5) -- cycle ; \draw   (180.5,172.5) .. controls (180.5,172.5) and (180.5,172.5) .. (180.5,172.5) .. controls (180.5,172.5) and (180.5,172.5) .. (180.5,172.5) .. controls (180.5,155.93) and (193.93,142.5) .. (210.5,142.5) .. controls (227.07,142.5) and (240.5,155.93) .. (240.5,172.5) ;  
%Shape: Arc [id:dp18214287486303737] 
\draw  [draw opacity=0] (420.5,172.5) .. controls (420.5,172.5) and (420.5,172.5) .. (420.5,172.5) .. controls (420.5,172.5) and (420.5,172.5) .. (420.5,172.5) .. controls (420.5,155.93) and (433.93,142.5) .. (450.5,142.5) .. controls (467.07,142.5) and (480.5,155.93) .. (480.5,172.5) -- (450.5,172.5) -- cycle ; \draw   (420.5,172.5) .. controls (420.5,172.5) and (420.5,172.5) .. (420.5,172.5) .. controls (420.5,172.5) and (420.5,172.5) .. (420.5,172.5) .. controls (420.5,155.93) and (433.93,142.5) .. (450.5,142.5) .. controls (467.07,142.5) and (480.5,155.93) .. (480.5,172.5) ;  
\draw   (204.5,137.5) -- (214.9,142.7) -- (204.5,147.9) ;
\draw   (288,166.5) -- (298.4,171.7) -- (288,176.9) ;
\draw   (369.5,166.5) -- (379.9,171.7) -- (369.5,176.9) ;
\draw   (445,137.5) -- (455.4,142.7) -- (445,147.9) ;

% Text Node
\draw (200.5,149) node [anchor=north west][inner sep=0.75pt]   [align=left] {{\fontfamily{pcr}\selectfont {\footnotesize -Ep}}};
% Text Node
\draw (443,148.5) node [anchor=north west][inner sep=0.75pt]   [align=left] {{\fontfamily{pcr}\selectfont {\footnotesize Ep}}};


\end{tikzpicture}
\caption{Contour for Retarded Propagator}\label{fig:retarded-propagator}
\end{figure}

\begin{figure}[!htb]
    \centering
    \begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,300); %set diagram left start at 0, and has height of 300

%Shape: Axis 2D [id:dp19021134988303667] 
\draw  (117.2,171.99) -- (541.44,171.99)(328.64,37.6) -- (328.64,254.64) (534.44,166.99) -- (541.44,171.99) -- (534.44,176.99) (323.64,44.6) -- (328.64,37.6) -- (333.64,44.6)  ;
%Shape: Free Drawing [id:dp7182675262791272] 
\draw  [line width=3] [line join = round][line cap = round] (210.2,171.9) .. controls (210.2,171.9) and (210.2,171.9) .. (210.2,171.9) ;
%Shape: Free Drawing [id:dp5698132248798358] 
\draw  [line width=3] [line join = round][line cap = round] (450.2,171.4) .. controls (450.2,171.4) and (450.2,171.4) .. (450.2,171.4) ;
%Shape: Arc [id:dp42528895990298676] 
\draw  [draw opacity=0] (240.5,172.5) .. controls (240.5,172.5) and (240.5,172.5) .. (240.5,172.5) .. controls (240.5,172.5) and (240.5,172.5) .. (240.5,172.5) .. controls (240.5,189.07) and (227.07,202.5) .. (210.5,202.5) .. controls (193.93,202.5) and (180.5,189.07) .. (180.5,172.5) -- (210.5,172.5) -- cycle ; \draw   (240.5,172.5) .. controls (240.5,172.5) and (240.5,172.5) .. (240.5,172.5) .. controls (240.5,172.5) and (240.5,172.5) .. (240.5,172.5) .. controls (240.5,189.07) and (227.07,202.5) .. (210.5,202.5) .. controls (193.93,202.5) and (180.5,189.07) .. (180.5,172.5) ;  
%Shape: Arc [id:dp18214287486303737] 
\draw  [draw opacity=0] (480.5,172.5) .. controls (480.5,172.5) and (480.5,172.5) .. (480.5,172.5) .. controls (480.5,172.5) and (480.5,172.5) .. (480.5,172.5) .. controls (480.5,189.07) and (467.07,202.5) .. (450.5,202.5) .. controls (433.93,202.5) and (420.5,189.07) .. (420.5,172.5) -- (450.5,172.5) -- cycle ; \draw   (480.5,172.5) .. controls (480.5,172.5) and (480.5,172.5) .. (480.5,172.5) .. controls (480.5,172.5) and (480.5,172.5) .. (480.5,172.5) .. controls (480.5,189.07) and (467.07,202.5) .. (450.5,202.5) .. controls (433.93,202.5) and (420.5,189.07) .. (420.5,172.5) ;  
\draw   (204.5,197) -- (214.9,202.2) -- (204.5,207.4) ;
\draw   (288,166.5) -- (298.4,171.7) -- (288,176.9) ;
\draw   (369.5,166.5) -- (379.9,171.7) -- (369.5,176.9) ;
\draw   (444.5,197) -- (454.9,202.2) -- (444.5,207.4) ;

% Text Node
\draw (200.5,149) node [anchor=north west][inner sep=0.75pt]   [align=left] {{\fontfamily{pcr}\selectfont {\footnotesize -Ep}}};
% Text Node
\draw (443,148.5) node [anchor=north west][inner sep=0.75pt]   [align=left] {{\fontfamily{pcr}\selectfont {\footnotesize Ep}}};


\end{tikzpicture}
\caption{Contour for Advanced Propagator}\label{fig:advanced-propagator}
\end{figure}

\begin{figure}[!htb]
    \centering
    \begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,300); %set diagram left start at 0, and has height of 300

%Shape: Axis 2D [id:dp19021134988303667] 
\draw  (117.2,171.99) -- (541.44,171.99)(328.64,37.6) -- (328.64,254.64) (534.44,166.99) -- (541.44,171.99) -- (534.44,176.99) (323.64,44.6) -- (328.64,37.6) -- (333.64,44.6)  ;
%Shape: Free Drawing [id:dp7182675262791272] 
\draw  [line width=3] [line join = round][line cap = round] (210.2,171.9) .. controls (210.2,171.9) and (210.2,171.9) .. (210.2,171.9) ;
%Shape: Free Drawing [id:dp5698132248798358] 
\draw  [line width=3] [line join = round][line cap = round] (450.2,171.4) .. controls (450.2,171.4) and (450.2,171.4) .. (450.2,171.4) ;
%Shape: Arc [id:dp42528895990298676] 
\draw  [draw opacity=0] (240.5,172.5) .. controls (240.5,172.5) and (240.5,172.5) .. (240.5,172.5) .. controls (240.5,172.5) and (240.5,172.5) .. (240.5,172.5) .. controls (240.5,189.07) and (227.07,202.5) .. (210.5,202.5) .. controls (193.93,202.5) and (180.5,189.07) .. (180.5,172.5) -- (210.5,172.5) -- cycle ; \draw   (240.5,172.5) .. controls (240.5,172.5) and (240.5,172.5) .. (240.5,172.5) .. controls (240.5,172.5) and (240.5,172.5) .. (240.5,172.5) .. controls (240.5,189.07) and (227.07,202.5) .. (210.5,202.5) .. controls (193.93,202.5) and (180.5,189.07) .. (180.5,172.5) ;  
%Shape: Arc [id:dp18214287486303737] 
\draw  [draw opacity=0] (420.5,172.5) .. controls (420.5,172.5) and (420.5,172.5) .. (420.5,172.5) .. controls (420.5,172.5) and (420.5,172.5) .. (420.5,172.5) .. controls (420.5,155.93) and (433.93,142.5) .. (450.5,142.5) .. controls (467.07,142.5) and (480.5,155.93) .. (480.5,172.5) -- (450.5,172.5) -- cycle ; \draw   (420.5,172.5) .. controls (420.5,172.5) and (420.5,172.5) .. (420.5,172.5) .. controls (420.5,172.5) and (420.5,172.5) .. (420.5,172.5) .. controls (420.5,155.93) and (433.93,142.5) .. (450.5,142.5) .. controls (467.07,142.5) and (480.5,155.93) .. (480.5,172.5) ;  
\draw   (204.5,197) -- (214.9,202.2) -- (204.5,207.4) ;
\draw   (288,166.5) -- (298.4,171.7) -- (288,176.9) ;
\draw   (369.5,166.5) -- (379.9,171.7) -- (369.5,176.9) ;
\draw   (444.5,137.5) -- (454.9,142.7) -- (444.5,147.9) ;

% Text Node
\draw (200.5,149) node [anchor=north west][inner sep=0.75pt]   [align=left] {{\fontfamily{pcr}\selectfont {\footnotesize -Ep}}};
% Text Node
\draw (443,148.5) node [anchor=north west][inner sep=0.75pt]   [align=left] {{\fontfamily{pcr}\selectfont {\footnotesize Ep}}};


\end{tikzpicture}


\caption{Contour for Feynman Propagator}\label{fig:feynman-propagator}
\end{figure}

A particularly useful propagator in QFT is the \textbf{Feynman propagator}. It is described by the pole prescription of picking the $-E_\mathbf{p}$ pole from below and the $E_\mathbf{p}$ pole from above (Fig. \ref{fig:feynman-propagator}). This results in
\begin{equation}
    \label{feynman-propagator}
    D_F(x-y)=\begin{cases}
        D(x-y) & x^0>y^0\\
        D(y-x) & x^0<y^0
    \end{cases}
\end{equation}
\newpage
A more common way to write the Feynman propagator is the $i\epsilon$-prescription, so that the poles are slightly shifted upward and downward from the axis, so the correct poles are naturally picked up.
\begin{equation*}
    D_F(x-y)=\int \frac{d^4p}{(2\pi)^4}\frac{ie^{-ip\cdot(x-y)}}{p^2-m^2+i\epsilon}\quad\epsilon>0
\end{equation*}

Finally, an interesting fact to mention is that all sorts of propagators (i.e., Green functions) are also described by the vacuum expectation value of the different products of two field operators, which are what two-point correlation functions really refer to. For example, the retarded propagator is often written as
\begin{equation*}
    D_R(x-y)=\theta(x^0-y^0)\bra{0}\comm{\phi(x)}{\phi(y)}\ket{0}
\end{equation*}

Importantly, the Feynman propagator is written as
\begin{equation*}
    D_F(x-y)=\bra{0}T\left[\phi(x)\phi(y)\right]\ket{0}
\end{equation*}

We introduced the \textbf{time ordering} in this expression. Similar to normal ordering, time ordering re-order the operators in it according to their time label, with the latest one to the leftmost. So when $x^0>y^0$, $T[\phi(x)\phi(y)]=\phi(x)\phi(y)$ and vice versa. You are recommended to check this expression yourself.

\section{The Pandora Box: Interaction}
If you wish, we could go on and carry out every detail of the quantum free scalar, i.e., it is exactly solved. But that's too much for us. All the introduced devices in the previous section are enough to let us peek into the world of interacting field theories, meaning that the fields are no longer decomposed into decoupled wave modes. In our interpretation where excitation of modes are recognized as particles, this indicates interaction between them: as time elapses, modes can cease or arise in accord to each other. However, all those interpretations usually only make sense when the interactions are small, so the theory can be thought as modified upon the free theory, or equivalently, free particles. And indeed, we will only work with perturbative interactions, though another important reason for that is nobody knows how to properly deal with strongly coupled quantum fields.

Even if we are to work with perturbative calculations, the interacting theories are incredibly complicated, and we will inevitably run into the problem of infinities and renormalization. In fact, one would fairly say that the entire complication of QFT comes from interactions. In this section, we will avoid renormalization as much as possible, and focus on introducing the formalism. Even in this case, there are still many things to say.
\subsection{The Interaction Picture}
We all know that the Schrödinger picture involves evolving states and stationary operators, while the Heisenberg picture involves stationary states and evolving operators. The key idea of the interaction picture is that, find a way to evolve both the states and the operators, so that the time evolution looks as if only part of the Hamiltonian is relevant. We denote a Schrödinger picture state by $\ket{\Psi(t)}_S$. Also, we assume a Hamiltonian of the form
\begin{equation*}
    H=H_0+H_\text{int}
\end{equation*}
Although the separation of the Hamiltonian is arbitrary, we conventionally separate it into a free part and an interaction part.

Then, we define the transformation from the Schrödinger picture to the interaction picture, with identification at $t=t_0$
\begin{equation*}
    \ket{\Psi(t)}_I=\exp{\{iH_{0,S} (t-t_0)\}}\ket{\Psi(t)}_S\quad\ket{\Psi(t_0)}_I=\ket{\Psi(t_0)}_S
\end{equation*}
and the corresponding transformation of operators
\begin{equation*}
    \mathcal{O}_I(t)=\exp{\{iH_{0,S} (t-t_0)\}}\mathcal{O}_S\exp{\{-iH_{0,S} (t-t_0)\}}
\end{equation*}

With all the rules, we can now transform the Schrödinger equation
\begin{equation*}
    \begin{split}
    i\frac{\ket{\Psi(t)}_I}{dt}&=i\frac{d\left(\exp{\{iH_{0,S} (t-t_0)\}}\ket{\Psi(t)}_S\right)}{dt}\\
    &=-\exp{\{iH_{0,S} (t-t_0)\}}H_{0,S}\ket{\Psi(t)}_S+i\exp{\{iH_{0,S} (t-t_0)\}}\frac{\ket{\Psi(t)}_S}{dt}\\
    &=-\exp{\{iH_{0,S} (t-t_0)\}}H_{0,S}\exp{\{-iH_{0,S} (t-t_0)\}}\exp{\{iH_{0,S} (t-t_0)\}}\ket{\Psi(t)}_S\\
    &\quad+\exp{\{iH_{0,S} (t-t_0)\}}H_S\exp{\{-iH_{0,S} (t-t_0)\}}\exp{\{iH_{0,S} (t-t_0)\}}\ket{\Psi(t)}_S\\
    &=-H_{0,I}(t)\ket{\Psi(t)}_I+H_{I}(t)\ket{\Psi(t)}_I\\
    &=H_{\text{int},I}(t)\ket{\Psi(t)}_I
    \end{split}
\end{equation*}

Although not that important, we can directly read off the evolution of the operator from the definition of transformation
\begin{equation*}
    i\frac{d\mathcal{O}_I(t)}{dt}=\comm{\mathcal{O}_I(t)}{H_{0,I}(t)}
\end{equation*}
much like the Heisenberg picture.

The transformed Schrödinger equation can be solved iteratively by
\begin{equation*}
    \begin{split}
        \ket{\Psi(t)}_I&=\left(1+i\int_{t_0}^t H_{\text{int},I}(\tau)d\tau+i^2\int_{t_0}^t\int_{t_0}^\tau H_{\text{int},I}(\tau)H_{\text{int},I}(\tau^\prime)d\tau^\prime d\tau+\cdots\right)\ket{\Psi(t_0)}_I\\
        &=\left(1+i\int_{t_0}^t H_{\text{int},I}(\tau)d\tau+\frac{i^2}{2!}\int_{t_0}^t\int_{t_0}^t T\left[H_{\text{int},I}(\tau)H_{\text{int},I}(\tau^\prime)\right]d\tau^\prime d\tau+\cdots\right)\ket{\Psi(t_0)}_I\\
        &=T\left[\exp{\left\{i\int_{t_0}^t H_{\text{int},I}(\tau) d\tau\right\}}\right]\ket{\Psi(t_0)}_I
    \end{split}
\end{equation*}
The first line can be checked to solve the equation by direct differentiation, and in the second line we inserted the time ordering to unify the interval of integral, with a $\frac{1}{n!}$ accounting for the multiplicity. The third line is a compact way to denote this.

This is the celebrated \textbf{Dyson series}, the explicit evolution of states in the interaction picture, which is also significant in time dependent perturbation. It is worth pointing out that so far every results are exact and non-perturbative, but this scheme is especially suitable for perturbation because if $H_\text{int}$ is controlled by some small parameter $\epsilon$, then the Dyson series make explicit the contributions of different orders of $\epsilon$ into the time evolution, and one can reasonably cutoff at some finite order of $\epsilon$ to get perturbative results.
\subsection{Physical Vacuum}
It is time to utilise the device to the real scalar theory. Let us introduce an interaction to the Klein-Gordon field by modifying the Lagrangian density as
\begin{equation*}
    \mathcal{L}=\frac12\partial^\mu\phi\partial_\mu\phi-\frac12 m^2\phi^2-\frac{\lambda}{4!}\phi^4
\end{equation*}
so that the corresponding $\mathbf{H}_\text{int}$ is
\begin{equation*}
    \mathbf{H}_\text{int}=\int d^3x\,\frac{\lambda}{4!}\phi^4
\end{equation*}

Here we begin to enjoy the first elegance provided by the interaction picture: since the operators are just evolved with the free part, the time-dependent $\phi(x)$ we worked out is still available, just with the creation and annihilation operators in it replaced with the corresponding interaction picture one. For this is the general case, we will drop the subscripts indicating pictures without ambiguity.

But we also run into our first problem: what is the vacuum now? Note that we have two ``vacua", one that is annihilated by the annihilation operator $\annhil{a}{p}\ket{0}=0$, and another that is the lowest-energy eigenstate of the full Hamiltonian. In free theories, the two coincides. But since we modified the Hamiltonian, we can no longer expect that\footnote{If you are confused, think about adding extra terms to the quantum hamonic oscillator.}, and the \textit{de facto} vacuum we should look for is, of course, the latter one, which we will call it the physical vacuum\footnote{Subtlety already arises here, because switching the vacuum somehow destroys the interpretation of particle numbers and the action of creation annihilation operators. For example: is the vacuum really free of particles? But this does not matter because we are not dealing with scattering in this section. We can only address this fact when we think about renormalization.}. However, the creation annihilation description is too good to dispose, and it is pleasing if we can find the relation between the two.

For convenience, we will denote the evolution operator by
\begin{equation*}
    U(t,t_0)\equiv T\left[\exp{\left\{i\int_{t_0}^t \mathbf{H}_{\text{int}}(\tau) d\tau\right\}}\right]
\end{equation*}
and the energy eigenstate of the full Hamiltonian by $\ket{\Omega}$ and $\ket{n}\,n\geq1$. Then if we evolve the free vacuum $\ket{0}$
\begin{equation*}
    U(t,t_0)\ket{0}=\braket{\Omega}{0}e^{-iE_0(t-t_0)}\ket{\Omega}+\sum_{n=1}^\infty \braket{n}{0}e^{-iE_n(t-t_0)}\ket{n}
\end{equation*}

It is satisfying if states with higher energy would die out. In principle, we can imagine a process where the interaction is turned off (i.e. $\lambda=0$) at some distant past, and then adiabatically turned on, so that the ground state evlolved to the ground state. We can implement this without being rigorous by pushing $t_0$ to the far past while it takes on a small imaginary part (characterizing the dissipation caused by the adiabatic process).
\begin{equation*}
    \lim_{T\to (1-i\epsilon)\infty}U(t,-T)\ket{0}=\braket{\Omega}{0}e^{-iE_0(t+T)}\ket{\Omega}
\end{equation*}

We can repeat the process for $\bra{\Omega}$
\begin{equation*}
    \bra{0}U(t,t_0)^\dagger=\bra{\Omega}\braket{0}{\Omega}e^{iE_0(t-t_0)}+\sum_{n=1}^\infty \bra{n}\braket{0}{n}e^{iE_n(t-t_0)}
\end{equation*}
\begin{equation*}
    \lim_{T\to (1-i\epsilon)\infty}\bra{0}U(T,t)=\bra{\Omega}\braket{0}{\Omega}e^{-iE_0(T-t)}
\end{equation*}

Therefore, we have isolated the physical vacuum
\begin{equation*}
\begin{cases}
    \ket{\Omega}=\lim_{T\to (1-i\epsilon)\infty}(\braket{\Omega}{0}e^{-iE_0(t+T)})^{-1}U(t,-T)\ket{0}\\
    \bra{\Omega}=\lim_{T\to (1-i\epsilon)\infty}(\braket{0}{\Omega}e^{-iE_0(T-t)})^{-1}\bra{0}U(T,t)
\end{cases}
\end{equation*}

From which, we can, for example, calculate the vacuum norm
\begin{equation*}
    \braket{\Omega}{\Omega}=\lim_{T\to (1-i\epsilon)\infty}\frac{\bra{0}U(T,-T)\ket{0}}{\left|\braket{\Omega}{0}\right|^2e^{-2iE_0T}}\stackrel{?}{=}1
\end{equation*}
Which is appropriately independent of $t$, the current time reference. However, it consists of unknown quantities such as $\braket{\Omega}{0}$ and a suspicious phase for the physical vacuum energy, which, usually, should in principle be fine because we will set this to $1$ for normalization. A more solid reasoning is that, when we later calculate the $n$-point correlation function, we will divide the entire expectation value with this normalization, and the expectation value indeed contains the exact same factor, that is safely quotiented, so no annoying phase will survive.

One last thing to remark here is that the imaginary time $i\epsilon$ is somehow identified with the $i\epsilon$ prescription of the Feynman propagator, as we will see later.
\subsection{Wick Theorem}
We made the physical vacuum available in last subsection, and we can proceed to work out more interesting quantities. One family of such quantities is the $n$-point correlation functions, as mentioned before, which we here formally define it as the vacuum expectation value of the time-ordered product of $n$ fields. For example, the below is a $3$-point correlation function
\begin{equation*}
    \bra{\Omega}T[\phi(x)\phi(y)\phi(z)]\ket{\Omega}
\end{equation*}

Actually, the correlation functions are the only quantities relevant in QFT, in the sense that they contain all the data needed to obtain observables, especially the $S$-matrix, which is the core observable of QFT.

With that being said, we now try to work out the simplest correlation function, the $2$-point correlation function. You might wonder why we care not the $1$-point correlator. In $\phi^4$ theory, we don't worry about it because it will turn out to be $0$. In other $\phi$-to-an-odd-number theories, it will apparently have non-zero values, but it will eventually be fixed to $0$, by renormalization, anyway.

We express the $2$-point function in free vacuum
\begin{equation*}
    \lim_{T\to (1-i\epsilon)\infty}\frac{\bra{0}U(T,t)T\left[\phi(x)\phi(y)\right]U(t,-T)\ket{0}}{\left|\braket{\Omega}{0}\right|^2e^{-2iE_0T}}
\end{equation*}
But wait! There are three time labels here, the reference time for the adiabatically constructed vacuum $t$, and the time label of time-evolved $\phi$, $x^0$ and $y^0$. For the vacuum to make any sense, operators must be defined on $t$, so there actually exists hidden time evolution. Without loss of generality, we assume $x^0>y^0$
\begin{equation*}
    \begin{split}
        &\lim_{T\to (1-i\epsilon)\infty}\frac{\bra{0}U(T,t)U(x^0,t)^\dagger\phi(x)U(x^0,t)U(y^0,t)^\dagger\phi(y)U(y^0,t)U(t,-T)\ket{0}}{\left|\braket{\Omega}{0}\right|^2e^{-2iE_0T}}\\
        =&\lim_{T\to (1-i\epsilon)\infty}\frac{\bra{0}U(T,x^0)\phi(x)U(x^0,y^0)\phi(y)U(y^0,-T)\ket{0}}{\left|\braket{\Omega}{0}\right|^2e^{-2iE_0T}}\\
        =&\lim_{T\to (1-i\epsilon)\infty}\frac{\bra{0}T\left[\phi(x)\phi(y)\exp{\left\{i\int_{-T}^T \mathbf{H}_{\text{int}}(\tau) d\tau\right\}}\right]\ket{0}}{\left|\braket{\Omega}{0}\right|^2e^{-2iE_0T}}
    \end{split}
\end{equation*}
The time order manifest itself and combined to a big one! After dividing by the normalization $\braket{\Omega}{\Omega}$, we are left with
\begin{equation*}
    \lim_{T\to (1-i\epsilon)\infty}\frac{\bra{0}T\left[\phi(x)\phi(y)\exp{\left\{i\int_{-T}^T \mathbf{H}_{\text{int}}(\tau) d\tau\right\}}\right]\ket{0}}{\bra{0}T\left[\exp{\left\{i\int_{-T}^T \mathbf{H}_{\text{int}}(\tau) d\tau\right\}}\right]\ket{0}}
\end{equation*}

This is much simpler. All we need to consider now is how to evaluate the free-vacuum expectation of time-ordered product of operators. Or more precisely, product of field operators, since $\mathbf{H}_\text{int}$ is no more than a string of field operators as well. Due to the nature that the free vacuum can be annihilated, the most obvious idea is to try to commutate the creation and annihilation operators in the operator product until we get a sum of normal ordered operator products. Then, any operator product that still contains annihilation or creation operators will vanish, simply because $\annhil{a}{p}\ket{0}=\bra{0}\crea{a}{p}=0$. Our goal is clear now: find the relation between time ordered operator products and normal ordered operator products. This is the essence of \textbf{Wick Theorem}.

For we are simply working with the field operator, we denote the creation operator and the annihilation operator part of it, respectively, by $\phi_+$ and $\phi_-$. Then the normal ordering is simply all $\phi_+$ to the left and all $\phi_-$ to the right.

We begin by finding out what we get by flipping $\phi_-(x)\phi_+(y)$
\begin{equation*}
    \begin{split}
    \comm{\phi_-(x)}{\phi_+(y)}=&\int\frac{d^3\mathbf{p}}{(2\pi)^3\sqrt{2E_\mathbf{p}}}\frac{d^3\mathbf{p^\prime}}{(2\pi)^3\sqrt{2E_\mathbf{p^\prime}}}e^{-ip\cdot x+ip^\prime\cdot y}\comm{\annhil{a}{p}}{\crea{a}{p^\prime}}\\
    =&\int\frac{d^3\mathbf{p}}{(2\pi)^3 2E_\mathbf{p}}e^{-ip\cdot(x-y)}\\
    =&D(x-y)
    \end{split}
\end{equation*}
Therefore, $\phi_-(x)\phi_+(y)=\phi_+(y)\phi_-(x)+D(x-y)$. We now,consider a time ordered product of field operators $\{\phi(x_n)\}$, by requiring $x^0_i>x^0_j$ for $i<j$. For the case $n=2$, the result is trivial
\begin{equation*}
    \begin{split}
        \phi(x_1)\phi(x_2)&=\left(\phi_+(x_1)+\phi_-(x_1)\right)\left(\phi_+(x_2)+\phi_-(x_2)\right)\\
        &=\phi_+(x_1)\phi_+(x_2)+\phi_+(x_1)\phi_-(x_2)+\phi_-(x_1)\phi_+(x_2)+\phi_-(x_1)\phi_-(x_2)\\
        &=\phi_+(x_1)\phi_+(x_2)+\phi_+(x_1)\phi_-(x_2)+\phi_+(x_2)\phi_-(x_1)+\phi_-(x_1)\phi_-(x_2)+D(x_1-x_2)\\
        &=\nomo{\phi(x_1)\phi(x_2)}+D(x_1-x_2)
    \end{split}
\end{equation*}

For $n=3$
\begin{equation*}
    \begin{split}
        \phi(x_1)\phi(x_2)\phi(x_3)&=\left(\phi_+(x_1)+\phi_-(x_1)\right)\left(\phi_+(x_2)+\phi_-(x_2)\right)\left(\phi_+(x_3)+\phi_-(x_3)\right)\\
        &=\left[\nomo{\phi(x_1)\phi(x_2)}+D(x_1-x_2)\right]\nomo{\phi(x_3)}\\
        &=\nomo{\phi(x_1)\phi(x_2)}\phi_+(x_3)+\nomo{\phi(x_1)\phi(x_2)}\phi_-(x_3)+D(x_1-x_2)\nomo{\phi(x_3)}\\
        &=\nomo{\phi(x_1)\phi(x_2)\phi(x_3)}\\
        &\qquad+D(x_2-x_3)\nomo{\phi(x_1)}+D(x_1-x_3)\nomo{\phi(x_2)}+D(x_1-x_2)\nomo{\phi(x_3)}
    \end{split}
\end{equation*}

From below, we demand ascending $x_i$ within $\phi_\pm$, respectively, to avoid overcounting in normal ordered products. When we succeedingly append new field operators to the product, by provoking the ordered pattern for shorter products, we only need to flip terms of the form
$$
    \nomo{\phi(x_1)\phi(x_2)\cdots\phi(x_n)}\phi_+(x_{n+1})
$$
because$\nomo{\phi(x_1)\phi(x_2)\cdots\phi(x_n)}\phi_-(x_{n+1})$ is already properly ordered. In doing so, we only need to consider different sequences of $\prod_{0<\sigma_1<\sigma_2<\cdots<\sigma_k\leq n}\phi_-(x_{\sigma_i})$ present in each terms, where $k$ can range from $1$ to $n$. For each of such sequences
\begin{equation*}
\begin{split}
    &\quad\phi_-(x_{\sigma_1})\phi_-(x_{\sigma_2})\cdots\phi_-(x_{\sigma_k})\phi_+(x_{n+1})\\
    &=\phi_-(x_{\sigma_1})\cdots\phi_-(x_{\sigma_{k-1}})\phi_+(x_{n+1})\phi_-(x_{\sigma_k})+\phi_-(x_{\sigma_1})\cdots\phi_-(x_{\sigma_{k-1}})D(x_{\sigma_k}-x_{n+1})\\
    &=\phi_-(x_{\sigma_1})\cdots\phi_-(x_{\sigma_{k-2}})\phi_+(x_{n+1})\phi_-(x_{\sigma_{k-1}})\phi_-(x_{\sigma_k})\\
    &\qquad+\phi_-(x_{\sigma_1})\cdots\phi_-(x_{\sigma_{k-2}})\phi_-(x_{\sigma_k})D(x_{\sigma_{k-1}}-x_{n+1})+\phi_-(x_{\sigma_1})\cdots\phi_-(x_{\sigma_{k-1}})D(x_{\sigma_k}-x_{n+1})\\
    &=\phi_+(x_{n+1})\phi_-(x_{\sigma_1})\phi_-(x_{\sigma_2})\cdots\phi_-(x_{\sigma_k})\\
    &\qquad+\sum_{i=1}^k\phi_-(x_{\sigma_1})\cdots\phi_-(x_{\sigma_{i-1}})\phi_-(x_{\sigma_{i+1}})\cdots\phi_-(x_{\sigma_k})D(x_{\sigma_i}-x_{n+1})
\end{split}
\end{equation*}

By applying this to all terms, all are now again properly ordered, but with some extra $D(x_i-x_{n+1})$ produced by removing $\phi_-(x_i)$ from the products. Note, however, if we collect all operator products for a single $D(x_i-x_{n+1})$, we will realize that they uniquely iterate over all possible ascending operator products without $\phi_-(x_i)$. Therefore, what one actually obtain is
\begin{multline}
    \label{nomo-commutation}
    \nomo{\phi(x_1)\phi(x_2)\cdots\phi(x_n)}\phi_+(x_{n+1})=\phi_+(x_{n+1})\nomo{\phi(x_1)\phi(x_2)\cdots\phi(x_n)}\\+\sum_{i=1}^nD(x_i-x_{n+1})\nomo{\phi(x_1)\cdots\phi(x_{i-1})\phi(x_{i+1})\cdots\phi(x_n)}
\end{multline}

This applies to extending the conversion of time ordering immediately. Since, from the $n=2$ case, we know the commutation results in some normal ordered products multiplied by some propagators $D(x_i-x_j)$. Therefore, if we append a new field, the tuning of $\phi_+(x_{n+1})$ to the proper position yields more similar terms by removing one of the existing field and multiplying by a new propagator. Another technical issue is that we have fixed the time in order of $x_i$ in the derivation, but we generally work with time ordering surrounding field products with unknown time order. This can be easily mended, because we know if we consider $T\left[\phi(x_i)\phi(x_j)\right]$, we get $D(x_i-x_j)$ for $x^0_i>x^0_j$, and $D(x_j-x_i)$ for $x^0_i<x^0_j$, by the definition of time ordering and the virtue of our derivation. But this is simply the definition of the Feynman propagator \eqref{feynman-propagator}! So, even with time ordering, everything still work by replacing $D$ using $D_F$. Hence, we can now officially state the celebrated \textbf{Wick Theorem}
\begin{definition}[Wick Contraction]
    \begin{equation*}
        \wick{\nomo{\phi(x_1)\cdots\c1\phi(x_i)\cdots\c1\phi(x_j)\cdots\phi(x_n)}}=\nomo{\phi(x_1)\cdots\cancel{\phi(x_i)}\cdots\cancel{\phi(x_j)}\cdots\phi(x_n)}D_F(x_i-x_j)
    \end{equation*}
\end{definition}
\begin{theorem}[Wick Theorem]
    The time ordering of field operators is equal to the sum of \textbf{all} possible Wick contractions multiplied by the normal ordering of the leftover field operators.
    \begin{equation*}
        \begin{split}
            T\left[\phi(x_1)\phi(x_2)\phi(x_3)\phi(x_4)\right]=&\nomo{\phi(x_1)\phi(x_2)\phi(x_3)\phi(x_4)}+\nomo{\wick{\c1\phi(x_1)\c1\phi(x_2)\phi(x_3)\phi(x_4)}}\\
            &+\nomo{\wick{\c1\phi(x_1)\phi(x_2)\c1\phi(x_3)\phi(x_4)}}+\nomo{\wick{\c1\phi(x_1)\phi(x_2)\phi(x_3)\c1\phi(x_4)}}\\
            &+\nomo{\wick{\phi(x_1)\c1\phi(x_2)\c1\phi(x_3)\phi(x_4)}}+\nomo{\wick{\phi(x_1)\c1\phi(x_2)\phi(x_3)\c1\phi(x_4)}}\\
            &+\nomo{\wick{\phi(x_1)\phi(x_2)\c1\phi(x_3)\c1\phi(x_4)}}+\nomo{\wick{\c1\phi(x_1)\c1\phi(x_2)\c1\phi(x_3)\c1\phi(x_4)}}\\
            &+\nomo{\wick{\c2\phi(x_1)\c1\phi(x_2)\c2\phi(x_3)\c1\phi(x_4)}}+\nomo{\wick{\c2\phi(x_1)\c1\phi(x_2)\c1\phi(x_3)\c2\phi(x_4)}}
        \end{split}
    \end{equation*}
\end{theorem}

\section{Free Spinor Field}
If you are familiar enough to the relativistic quantum mechanics, or you simply read previous sections carefully, you know about the Dirac field and the Spin-Statistics Theorem. As indicated in the section title, we will not talk about generic fermions but instead only the Dirac field. Following the route of quantizing scalars, some perhaps can't wait to write down the Lagrangian for the Dirac field and canonically quantize it. For those people: another disappointment for you! While that is what we will do later, we will first do some tedious maths and clarify what is the spin of fields we've been constantly talking about.
\subsection{Representation Theory}
The necessity of studying the spins of particles traces to the representation theory of the Poincare group, which is the symmetry of the relativistic field theory.

\section{Quantum Free Spinor}

\section{The Feynman Path Integral}

\appendix
\section{Structure of Lorentz Group}
\label{appendix:structure-of-lorentz-group}
\bibliography{refs}

\end{document}
